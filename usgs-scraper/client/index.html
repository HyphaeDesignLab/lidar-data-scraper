<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src='third-party/turf-6.5.0.min.js'></script>
    <script src='third-party/mapbox-gl-v3.0.0.js'></script>
    <link href='third-party/mapbox-gl-v3.0.0.css' rel='stylesheet'/>
    <script src='third-party/mapbox-gl-draw-v1.4.3.js'></script>
    <link href='third-party/mapbox-gl-draw-v1.4.3.css' rel='stylesheet'/>
    <script src="map.js"></script>
    <script src="spinner.js"></script>
    <script src="mapbox-fake.js"></script>
    <script src="mapbox-draw-theme.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        h1, h2, h3, h4, h5 {
            margin: 2px;
        }
        #map-controls {
            position: fixed;
            top: 0;
            right: 0;
            background-color: maroon;
            color: white;
            border: 1px solid grey;
        }

        #map-controls input {
            display: block;
        }

        [data-controls=container] {
            position: fixed; top: 0; right: 0; z-index: 123;
            max-width: 500px;
            overflow-y: scroll;
            background: rgba(255,155,255,.85);
            max-height: 50%;
            min-height: 300px;
        }
        [data-controls=toggle] {
            cursor: pointer;
            position: fixed;
            top: 0;
            right: 0;
            z-index: 124;
            background-color: rgba(255, 255, 255, .85);
            border: 1px solid black;
        }

        [data-aoi-method-link] {
            padding: 3px;
            border: 1px solid grey;
            border-radius: 5px;
            display: inline-block;
            text-decoration: none;
        }
        [data-aoi-method] {
            padding: 5px;
        }
        [data-controls=area-of-interest] {
            padding: 3px;
            margin: 7px;
            border: 1px dashed black;
        }
        textarea {
            width: 90%;
            height: 100px;
            display: block;
        }

        .closeable-overlay {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            background: rgba(255,255,255,.5);
            z-index: 9000;
        }
        .closeable-overlay [data-el=content] {
            position: fixed;
            z-index: 9001;
            top: 10vh;
            left: 10vw;
            height: 80vh;
            width: 80vw;
        }
        .closeable-overlay div[data-el=content] {
            background-color: white;
        }
        .closeable-overlay div[data-el=close] {
            position: absolute;
            z-index: 9002;
            top: 5vh;
            right: 10vw;
            cursor: pointer;
        }

        .transparent-popup .mapboxgl-popup-content {
            background-color: rgba(255,255,255, .8);
        }

        #map .mapboxgl-canvas-container.mapboxgl-interactive canvas.mapboxgl-canvas {
            cursor: crosshair;
        }
    </style>
</head>
<body>
<div data-controls="container"
     data-style-min-width="300px">
    <div data-controls="content"  style="display: none; "> </div>
</div>
<div data-controls="toggle" style="">&#x2699;</div>
<div id='map' style='width: 100vw; height: 100vh;'></div>

<div style="display:none;">
    <div data-controls="add-area-of-interest">
        <h3>+ Add Area of Interest</h3>
        <div>
            <a href="#draw" data-aoi-method-link="draw">draw on map</a>
            <a href="#file" data-aoi-method-link="file">upload file</a>
            <a href="#manual" data-aoi-method-link="manual">manual</a>
        </div>
        <div data-aoi-method="draw">
            <button data-aoi-draw="start">select/draw on map</button>
            <button data-aoi-draw="stop">done drawing</button>
            <button data-aoi-draw="cancel" style="display: none;">cancel</button>
        </div>
        <div data-aoi-method="file">
            <input type="file" />
        </div>
        <div data-aoi-method="manual">
            <textarea placeholder="enter full GeoJSON or a simple array of polygon vertices' coordinates"></textarea>
            <button>Add</button>
            <div data-errors></div>
        </div>
    </div>
    <div data-controls="area-of-interest">
        <h4 data-name></h4>
        <button data-name-edit>edit name</button>
        <button data-button="intersect">find intersecting project tiles</button>
        <button data-details-toggle>details</button>
        <div data-details style="display: none">
            <div data-missing-tiles style="display: none; color: red;">Missing tiles: <span></span></div>
            <div>
                Intersecting Project Tiles: <span data-selected-laz-size></span>
                <div data-intersecting-projects>
                    <div data-intersecting-project><input type="checkbox" value="" /> <span></span></div>
                </div>
                <button data-tiles-geojson>GeoJSON</button>
                <button data-laz-list>LAZ URLs</button>
            </div>
        </div>

    </div>
    <div data-controls="area-of-interest-container">
        <h3>Saved Areas of Interests</h3>
    </div>
    <div data-controls="projects">
        <div data-controls="loaded">1</div>
        <div data-controls="other">1</div>
    </div>
    <div data-controls="projects">
        <div data-controls="loaded">1</div>
        <div data-controls="other">1</div>
    </div>
</div>


<script>
    HygeoLoadingSpinnerEl();
    LidarScraperMap()
</script>
</body>
</html>